# 🎯 プロフェッショナル仕入・粗利・在庫管理ダッシュボード

高品質でプロフェッショナルな仕入、粗利、予算、在庫管理のための統合ダッシュボードシステム

---

## 🌟 特徴

### 📊 高度なデータ分析
- **8つのKPI指標**: リアルタイムで重要な経営指標を追跡
- **ピボットテーブル**: 店舗×日付別の多次元分析
- **トレンド分析**: 売上・粗利の時系列チャート
- **在庫推定**: 日次在庫レベルの可視化
- **予算追跡**: 目標に対する進捗の視覚的表示

### 🎨 プロフェッショナルなUI/UX
- **ダークテーマ**: 目に優しいダークモードデザイン
- **レスポンシブ**: デスクトップ、タブレット、モバイル対応
- **アニメーション**: スムーズなトランジションとホバーエフェクト
- **インタラクティブ**: ホバーツールチップ、ドリルダウン機能

### ⚡ 高性能
- **Pure JavaScript**: 外部ライブラリ不要（Chart.jsなど不使用）
- **Canvas API**: 高速なチャート描画
- **IndexedDB**: クライアントサイドデータ永続化
- **キャッシング**: インテリジェントなデータキャッシュ

---

## 📦 コンポーネント構成

```
/home/user/Test4/
├── js/
│   ├── services/
│   │   └── database/
│   │       ├── pivotEngine.js          # ピボットテーブル計算エンジン
│   │       ├── repository.js           # IndexedDBアクセス層
│   │       ├── aggregator.js           # データ集計
│   │       └── calculationEngine.js    # 計算エンジン
│   │
│   └── ui/
│       ├── components/
│       │   └── ChartBase.js            # チャート基底クラス
│       │                               # - LineChart
│       │                               # - BarChart
│       │                               # - AreaChart
│       │
│       └── dashboard/
│           └── DashboardApp.js         # メインオーケストレーター
│
├── css/
│   └── professionalDashboard.css       # プロフェッショナルスタイル
│
└── index.html                           # エントリーポイント
```

---

## 🚀 クイックスタート

### 1. ファイルを開く
```
file:///home/user/Test4/index.html
```

### 2. データをインポート

#### 必須ファイル:
1. **📦 仕入データ** (.xlsx)
   - 列: 日付、店舗、仕入先、原価、数量

2. **💰 売上・売変データ** (.xlsx)
   - 列: 日付、店舗、売上金額、売変金額

#### オプションファイル:
3. **⚙️ 初期設定** (.xlsx) - 期首・期末在庫
4. **📊 予算** (.xlsx) - 売上・粗利予算

### 3. ダッシュボードを表示
1. 「📊 ダッシュボード表示」ボタンをクリック
2. 自動的にプロフェッショナルダッシュボードが起動

---

## 📊 KPI指標

### 1. 💰 総売上
- **計算式**: Σ(売上金額)
- **説明**: 期間内の総売上高
- **トレンド**: 前期比較

### 2. 💎 粗利額
- **計算式**: 売上 - 原価
- **説明**: 総粗利益額
- **トレンド**: 前期比較

### 3. 📊 粗利率
- **計算式**: (粗利額 / 売上) × 100
- **説明**: 売上に対する粗利の割合
- **単位**: %

### 4. 📦 総仕入高
- **計算式**: Σ(仕入原価)
- **説明**: 期間内の総仕入金額
- **トレンド**: 前期比較

### 5. 🏪 推定在庫
- **計算式**: 期首在庫 + 仕入 - 売上原価
- **説明**: 期末時点の推定在庫額
- **トレンド**: 在庫増減

### 6. 🎯 予算達成率
- **計算式**: (実績 / 予算) × 100
- **説明**: 予算に対する達成度
- **単位**: %

### 7. 💸 売変率
- **計算式**: 売変額 / (売上 + 売変額) × 100
- **説明**: 値引き・割引の割合
- **単位**: %

### 8. 📅 日平均売上
- **計算式**: 総売上 / 営業日数
- **説明**: 1日あたりの平均売上
- **単位**: 円

---

## 🎨 デザインシステム

### カラーパレット
```css
Primary Blue:   #4F46E5  (Indigo-600)
Success Green:  #10B981  (Emerald-500)
Warning Yellow: #F59E0B  (Amber-500)
Danger Red:     #EF4444  (Red-500)
Violet:         #8B5CF6  (Violet-500)
Cyan:           #06B6D4  (Cyan-500)
Pink:           #F472B6  (Pink-400)
Lime:           #84CC16  (Lime-500)
```

### 背景レイヤー
```css
BG Main:   #0F172A  (Slate-900)
BG Card:   #1E293B  (Slate-800)
BG Hover:  #334155  (Slate-700)
BG Border: #475569  (Slate-600)
```

### タイポグラフィ
- **本文**: Noto Sans JP
- **数値**: JetBrains Mono (monospace)
- **サイズ**: 12px ~ 42px

---

## 📈 チャート

### 1. 売上トレンド (LineChart)
- **タイプ**: 折れ線グラフ
- **データ**: 日次売上・粗利
- **機能**: ホバーツールチップ、凡例

### 2. 推定在庫推移 (AreaChart)
- **タイプ**: エリアチャート
- **データ**: 日次推定在庫
- **機能**: 塗りつぶし、グラデーション

### 3. 予算達成率 (SVG Ring)
- **タイプ**: 円形プログレス
- **データ**: 予算vs実績
- **機能**: アニメーション、カラーコーディング

---

## 🔧 技術スタック

### フロントエンド
- **JavaScript**: ES6+ (Modules)
- **HTML5**: Semantic HTML
- **CSS3**: Grid, Flexbox, Animations

### データ層
- **IndexedDB**: ブラウザ内データベース
- **Repository Pattern**: データアクセス抽象化
- **Query Builder**: 柔軟なクエリ構築

### レンダリング
- **Canvas API**: 高性能チャート描画
- **SVG**: プログレスリング
- **CSS Animations**: UIトランジション

---

## 📱 レスポンシブデザイン

### デスクトップ (1200px以上)
- 4カラムKPIグリッド
- 2カラムダッシュボードグリッド
- フル機能表示

### タブレット (768px - 1200px)
- 3カラムKPIグリッド
- 1カラムダッシュボードグリッド
- コンパクト表示

### モバイル (480px - 768px)
- 1カラムKPIグリッド
- スタック表示
- タッチ最適化

---

## 🔐 データセキュリティ

- **クライアントサイド処理**: すべてのデータはブラウザ内で処理
- **IndexedDB**: ローカルストレージ、外部送信なし
- **プライバシー保護**: データは端末内に保存

---

## ⚡ パフォーマンス

### 最適化手法
- **キャッシング**: 計算結果のメモ化
- **仮想スクロール**: 大量データの効率的表示
- **遅延ロード**: 必要に応じてコンポーネント読み込み
- **デバウンス**: 入力イベントの最適化

### ベンチマーク (目標)
- ダッシュボード初期化: < 3秒
- チャート描画: < 1秒
- ピボットテーブル生成: < 2秒
- データインポート: < 5秒 (10,000レコード)

---

## 🧪 テスト

詳細なテスト手順は **DASHBOARD_TEST_GUIDE.md** を参照してください。

### クイックチェック
```bash
# ブラウザで開く
file:///home/user/Test4/index.html

# Console で確認
showDbInfo()  # データベース情報表示
```

---

## 🐛 トラブルシューティング

### よくある問題

#### 1. "データがありません"
**原因**: IndexedDBにデータが保存されていない
**解決**: インポート時に「インポート実行」をクリック

#### 2. チャートが表示されない
**原因**: Canvas初期化エラー
**解決**: ブラウザキャッシュクリア (Ctrl+F5)

#### 3. ピボットテーブルが空
**原因**: 仕入データなし
**解決**: 仕入ファイルを再インポート

---

## 📚 ドキュメント

- **DASHBOARD_TEST_GUIDE.md**: 詳細なテスト手順
- **DB保存確認方法.md**: IndexedDB確認方法
- **check-db.html**: データベース確認ツール

---

## 🔄 今後の予定

### Phase 3: フィルターとコントロール
- [ ] 日付範囲ピッカー
- [ ] 店舗マルチセレクト
- [ ] ビュー切り替え

### Phase 4: 詳細分析
- [ ] 仕入先別分析
- [ ] カテゴリ別分析
- [ ] 店舗比較
- [ ] 日別詳細

### Phase 5: エクスポート
- [ ] CSV出力
- [ ] Excel出力
- [ ] PDF レポート

---

## 📄 ライセンス

このプロジェクトは内部使用のために開発されました。

---

## 👤 開発

**プロジェクト**: 仕入粗利管理システム v8
**バージョン**: Professional Dashboard v1.0.0
**最終更新**: 2026-02-13

---

## 🙏 謝辞

- **Chart Rendering**: Custom Canvas API implementation
- **Design Inspiration**: Modern dashboard best practices
- **Icons**: Emoji icons for cross-platform compatibility

---

**🎉 プロフェッショナルダッシュボードへようこそ！**

データ駆動型の意思決定をサポートします。
